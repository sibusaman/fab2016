<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../stylesheets/bootstrap.min.css">
    <script src="../stylesheets/js/jquery.min.js"></script>
    <script src="../stylesheets/js/bootstrap.min.js"></script>

    <link rel="stylesheet" type="text/css" href="../stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../stylesheets/print.css" media="print">
    <link rel="stylesheet" href="../stylesheets/mine.css">
    <link rel="stylesheet" href="cssgal.css">
    <title>Sparky: the EDM PCB Mill</title>
    <style>
        div.codescroll {
            width: 1500px;
            height: 500px;
            overflow: scroll;
        }
    </style>
</head>

<body>
    <link rel="icon" type="image/png" href="../favicon.png">
    <header>
        <div class="container">
            <h1>Fab2016</h1>
            <h2>Sibu&#39;s FabAcademy 2016 Documentation Home</h2>
            <div class="panel-group">
                <div align="center">
                    <div>
                        <font size="6" align="center">
                            <b style="color:#b5e853">&lt;&lt;&lt; </b>
                            <a data-toggle="collapse" href="#collapse1">CLICK HERE TO LIST ALL PAGES</a>
                            <b style="color:#b5e853"> &gt;&gt;&gt;</b>
                        </font>
                    </div>
                    <div id="collapse1" class="panel-collapse collapse">
                        <table class="list-group" align="center">
                            <tr>
                                <td align="center" colspan="2">
                                    <a href="../index.html" class="btn">Home</a>
                                </td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <a href="../w1/w1.html" class="btn" title="Principles and Practices, Project Management ">Principles and Practices, Project Management. 1</a>
                                </td>
                                <td align="left">
                                    <a href="../w2/w2.html" class="btn" title="Computer-Aided Design">2. Computer-Aided Design</a>
                                </td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <a href="../w3/w3.html" class="btn" title="Computer-Controlled Cutting">Computer-Controlled Cutting. 3</a>
                                </td>
                                <td align="left">
                                    <a href="../w4/w4.html" class="btn" title="Electronics Production">4. Electronics Production</a>
                                </td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <a href="../w5/w5.html" class="btn" title="3D Scanning and Printing">3D Scanning and Printing. 5</a>
                                </td>
                                <td align="left">
                                    <a href="../w6/w6.html" class="btn" title="Electronics Design">6. Electronics Design</a>
                                </td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <a href="../w7/w7.html" class="btn" title="Computer-Controlled Machining">Computer-Controlled Machining. 7</a>
                                </td>
                                <td align="left">
                                    <a href="../w8/w8.html" class="btn" title="Embedded Programming">8. Embedded Programming</a>
                                </td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <a href="../w9/w9.html" class="btn" title="Mechanical Design">Mechanical Design. 9</a>
                                </td>
                                <td align="left">
                                    <a href="../w10/w10.html" class="btn" title="Machine Design">10. Machine Design</a>
                                </td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <a href="../w11/w11.html" class="btn" title="Input Devices">Input Devices. 11</a>
                                </td>
                                <td align="left">
                                    <a href="../w12/w12.html" class="btn" title="Moulding and Casting">12. Moulding and Casting</a>
                                </td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <a href="../w13/w13.html" class="btn" title="Output Devices">Output Devices. 13</a>
                                </td>
                                <td align="left">
                                    <a href="../w14/w14.html" class="btn" title="Composites">14. Composites</a>
                                </td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <a href="../w15/w15.html" class="btn" title="Networking and Communications">Networking and Communications. 15</a>
                                </td>
                                <td align="left">
                                    <a href="../w16/w16.html" class="btn" title="Interface and Application Programming">16. Interface and Application Programming</a>
                                </td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <a href="../w17/w17.html" class="btn" title="Applications and Implications">Applications and Implications. 17</a>
                                </td>
                                <td align="left">
                                    <a href="../w18/w18.html" class="btn" title="Invention, Intellectual Property, and Income">18. Invention, Intellectual Property, and Income</a>
                                </td>
                            </tr>
                            <tr>
                                <td align="center" colspan="2">
                                    <a href="../project/project.html" class="btn" title="Final Project:- Sparky the EDM PCB Mill">19. Project Development .19</a>
                                </td>
                            </tr>
                        </table>
                        <!--<div class="panel-footer"></div>-->
                    </div>
                </div>
            </div>
        </div>
    </header>
    <section>
        <h3 style="color:red"> This is my project development and documentation page, for the answers to the questions that we are supposed to answer as a part of 'project development' assignment, go to the
            <a href="#w19">bottom of the page</a>.</h3>
        <br>
        <br>
        <br>
        <br>
        <h1>SPARKY The Electrical Discharge Machining PCB Mill</h1>
        <p>
            The name explains everything, doesn't it?
        </p>
        <p>
            If not let me show you a video that was captured during the first week of Fab Academy. I was trying to see if the technique works, (well, I know it works, but I have to show you that
            it works, thats why the video!).
            <br>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/Zf7_GY7GMV4" frameborder="0" allowfullscreen></iframe>
            <br> In case if you haven't figured it out yet, this is basically a PCB milling machine, but the material removal is achieved with spark erosion.
        </p>

        <h2>How?</h2>
        <p>
            Anyway the process is very simple, as we all know, sparks are not good, most of the time, as it corrodes. But here we are using just that, the corrosive nature of the sparks, I'll be
            trying to tame the 'devil' and use to for good. By controlling the parameters of the sparks, the quality of the erosion could be controlled; parameteres such as frequency
            (number of sparks per second), voltage, current (or in better words charge-flow/energy per spark) etc. to control the energy deposited per area, per time. The energy/(area
            x time) or power/area determines how much material we are going to remove. Also the sacrificial electrodes diameter plays a big role, just like the diameter of CNC router
            bits.
        </p>
        <p>
            Here the sparks are not made in an air gap, instead water bath is used. It acts as a dielectric, a coolant and as a cleaning agent which cleans the work-area of eroded metal. Without
            the water as a coolant we cannot have high energy sparks without it affecting a large area, this means that if we don't use water as a coolant we cannot mill thin traces
            as fast as we want, without the trace being lifted off, or burned, or vaporised.
        </p>
        <p>
            I will be connecting one end of the power supply to the PCB and the other end to a thin wire which will be the 'milling bit'. This electrode also erodes as the process progresses, so
            this wire has to be supplied from a spool of wire and need to be extruded via something like 3d-printer head/extruder.
            <br>The tip of this wire and the PCB will all be submerged in water. The wire will be kept just above the copper to be removed and when the supply is activated, with the right
            voltage and the right spacing the electric field intensity in the water between the wire and the copper will be so high that the dielectric will break down, sending a short
            pulse. This pulse will remove material from both the wire and the copper.
        </p>
        <p>
            Since the wire also erodes in the process, I'm thinking about using titanium or molybdenum wires as they have high melting point and are highly durable.
            <br> Also, since the water used will not be deionized, it will have conductivity. Even if deionized water is used, the process generates chemicals/metallic compounds that spoil
            the water.
            <br>The point I'm trying to say is that since the water will be slightly conductive, there will be electrolysis and this process will remove the material from the +ve/anode.
            Hence the copper (workpiece) will be connected to the ground/cathode, hence no material will be removed from the workpiece, though some may get deposited.
        </p>

        <h2>Merits</h2>
        <p>
            If I could do this machine as I 'dreamed'.
            <ul>
                <li>Can have extremely close tracks which is impossible with the conventional milling machines in the lab.</li>
                <li>This is a new technique for PCB machining, at least I couldn't find one.</li>
                <li>Eco friendly, because no chemicals, no dust, but there will be eroded metal and metallic compounds, especially that of copper in water, which may not be that harmful</li>
                <li>This machine could be used for drilling tiny holes in metal, any metal, hard, soft, tempered annealed doesn't matter.</li>
                <li>This may be useful for cutting metal sheet, for example to make a stencil from a soda can for applying solder paste.</li>
                <li>Can be used for making tiny metal gears.</li>
                <li>And finally, no broken bits anymore!.</li>
            </ul>
        </p>

        <h2>Draw-backs</h2>
        <p>
            <br> Even if this project is implemented correctly there will be drawbacks, like
            <ul>
                <li>Slow speed machining.</li>
                <li>Chances of electrical short and shock (especially since water and electricity comes together), but it's will be relatively safe as we are not dealing with mains level
                    of voltages.</li>
                <li>Messy, there is a water bath and water circulation system included. </li>
                <li>Consumes more power than other PCB milling, may be, I have to confirm this.</li>
                <li>As mentioned above, the problem of electrolysis effect erroding the toolo wire.</li>
                <li>Since the process requires electrical connection to the site being machined, the gcode/tool-path generation will be slightly complicated. This is because we cannot machine
                    an area which has been electrically isolated by a previous pass. </li>
                <li>The machine cannot cut or drill the PCB (substrate), so you will have to manually drill and cut the required area from a larger piece of copper clad board.</li>
                <li>Very intolerant to even the slightest of surface imperfections and leveling errors.</li>
            </ul>
            Some of these draw backs could be fixed, for example we can add a separate end-effector for milling, which could be mounted on a servo arm, like the Auto Bed Leveling setup as seen
            in
            <a href="https://www.youtube.com/watch?v=x8eqSQNAyro">this youtube video</a> or
            <a href="http://www.thingiverse.com/thing:182889">here</a>.
            <br>
            <br> In fact I could fix the uneven surfaces and wrong leveling of the bed by adding an automatic bed leveling setup. Like what is seen in the following video.
            <br>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/R8o2Sy-KPUU" frameborder="0" allowfullscreen></iframe>
            <br> well, technically it's not bed leveling, because we are not leveling the bed. We are actually profiling the surface (in very low resolution), in another words, we are '2.5D
            scanning' the surface and moving the end-effector up and down according to the surface profile.
        </p>

        <h2>The Rough Idea</h2>
        <p>
            <figure>
                <img src="../w1/draft.jpg" alt="drawing" width="500" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='1000'" onclick="this.width='499'">
                <figcaption style="display:block; color:grey">The EDM process</figcaption>
            </figure>
            <ul>
                <li>The end-effector will be something like a 3D printer extruder without the heater. </li>
                <li>X-Y axis movements will be done using
                    <a href="http://corexy.com/index.html">core-xy</a>. Or will be a simple X-Y movement assembly.</li>
                <li>The end effector will also act as a probe for profiling the surface of the PCB for the 'auto-bed-level' function.</li>
                <li>There could be a separate spindle (on a servo arm) with a drill bit for making the via.</li>
                <li>A water pump and filter for circulating and filtering the water.</li>
                <li>
                    <a href="http://reprap.org/wiki/RAMPS_1.4">RAMPS_1.4</a> will be the controller.</li>
                <li>An additional power supply with/without a capacitor bank will be required for the machining process. The power-source may need to be of variable voltage and variable
                    frequency, though variable frequency could be done easily with a switching MOSFET. </li>
            </ul>
        </p>

        <h2>To-Do</h2>
        <p>
            <ul>
                <li>Decide the approximate voltage and current level, and/or the capacitor values to be used </li>
                <li>Make the end effector, which should extrude/retract thin wires of the order a fraction of an mm. The extruder will have to supply the power to the wire too.</li>
                <li>Almost all of the parts required like the control-electronics, Stepper motors and drivers, tungsten/molybdenum wires etc are sourced already.</li>
                <li>The mechanical parts like pulleys, couplers, threaded/smooth rods, gears etc has to be salvaged or made or sourced from local/online vendors.</li>
                <li>The overall assembly need to be designed and made using acrylic.</li>
                <li>A few parts like the linear bearing for the smooth rods are already made in my
                    <a href="../w12/w12.html">Moulding and Casting, Composite</a> assignment.</li>
                <li>The program will be based on 3D-Printer firmwares like Marlin.</li>
                <li>Planning to make use of the project,
                    <a href="http://linuxcnc.org/">Linux-CNC (EMC2)</a>
                </li>
            </ul>
        </p>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>

        <h1>Let's Begin Shall We?</h1>
        <p>
            As a first step, I tried contacting
            <a href="https://hackaday.io/Jarrett">Jarrett</a>, whom I mentioned in my
            <a href="../w17/w17.html">Applications and Implications</a> page.
            <br> To my surprise he responded quickly with a lot of details, like the troubles he faced, his ideas and he briefed me about his work till now. He also shared a few external
            links and threads.
        </p>
        <p>
            One of the difficulty he faced is the design of a wire extruder. So I decided to start working on that itself.
        </p>

        <h2>The wire Feeding Mechanism.</h2>
        <p>
            The wire feeder should be able to feed the thin wire and simultaneously supply connect it to the +ve rail of the power supply. I was thinking about a click pencil mechanism or a normal
            pinch wheel mechanism. I decided to stick with the pinch wheel mechanism as it seems simple.
        </p>
        <p>
            The idea is to use a rubber wheel found in the paper feeder unit of a printer and a 608/606 bearing. I talked about us getting a few printers from the 'scrapyard' for salvaging parts
            for our
            <a href="../w9/w9.html">Mechanical Design</a> assignment. All the rods and many other parts for this project will also come from the salvaged components of the printer.
        </p>
        <p>
            I used the 626-2RS bearing and the rubber wheels from the printer. Made an assembly using acrylic to make a nice compact wire feeding mechanism.
            <figure>
                <img src="wire-feeder.svg" width="500" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='1300'" onclick="this.width='500'">
                <figcaption style="display:block; color:grey"> As you know, the
                    <b style="color:red">red</b> lines are the cutting lines and the
                    <b style="color:black">black</b> lines and fills are the engraving area. This engraving will create a small surface depression that allows the bearing to run freely. The
                    <b>second piece will be sandwiched between two of the first type</b>. A piece of 6mm shaft will be used to mount the bearing and 4 screws will mount the sandwich to
                    the stepper motor.
                </figcaption>
            </figure>
        </p>
        <p>
            <figure>
                <img src="wire-feed2.jpg" width="500" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='1200'" onclick="this.width='500'">
                <figcaption style="display:block; color:grey"> All the three pieces cut and ready to assemble. The center piece has holes drilled into it, manually, to allow the wire to pass through.
                    <br>Also the Laser Engraving didn't work as expected it to, in first trial it just went through the boundary in the other it didn't go that deep. Since I didn't want
                    to waste those I just took a Dremel to fix it.</figcaption>

                <img src="wire-feed3.jpg" width="500" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='1200'" onclick="this.width='500'">
                <figcaption style="display:block; color:grey"> The two acrylic pieces in place, and the bearing is secured using a piece of the 6mm smooth rod I found from the printer. </figcaption>

                <img src="wire-feed4.jpg" width="500" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='1200'" onclick="this.width='500'">
                <figcaption style="display:block; color:grey"> Everything mounted and ready for a test.</figcaption>
            </figure>
        </p>

        <h3>Test</h3>
        <p>
            <video width="720" controls>
                <source src="wire feeder test.m4v" type="video/mp4"> Your browser does not support the video tag.
            </video>
            <br> The video shows the wire feeder in action. The controller is the result of my
            <a href="../w11/w11.html">Input/Output</a> assignment. As evident from the test, the result is a smashing success. The grip is very good, I can even pull on the thin copper wire to make the stepper
            rotate, thats how good the grip is.
            <br>
            <b>As a bonus, this mechanism also straightens the wire, unintended, but awesome!.</b>
            <br> The only problem is feeding the wire, as of now I have to disassemble and insert the wire and assemble it back.
        </p>
    </section>

    <section>
        <h2>The CoreXY Stage</h2>
        <p>
            Ever since I heard about
            <a href="http://www.doublejumpelectric.com/projects/core_xy/2014-07-15-core_xy/">CoreXY and H-bot</a>, it looked very interesting ans I always wanted to make one. Now that I need one, I'll do it now itself. But I had to decide between the CoreXY and
            H-Bot, The link in the beginning of this paragraph helped me decide that. The physics says that there is an inherent flaw in the design, the mechanism produces a torque
            that flexes the entire stage, this happens during certain motions.
        </p>
        <p>
            I used reference from
            <a href="http://corexy.com/">http://corexy.com/</a> and many other forums, to come up with my design. I'll be using 6mm acrylic for the construction, as that's the stiffest material that I could find
            out of what were available in the lab. I have also made the design with the dimension of the smooth rods I have eith me. There are two left from the 'scrap-hunt' during
            the
            <a href="../w9/w9.html">Mechanical Design</a> week. Also there were two more 30cm smooth rods with Puneeth, which he agreed to lend me for the time.
            <br> So here is the design I came up with.
            <div class="sketchfab-embed-wrapper">
                <iframe width="640" height="480" src="https://sketchfab.com/models/d8a122147c91476c8b2a16fd24e7a193/embed" frameborder="0" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true"
                    onmousewheel=""></iframe>

                <p style="font-size: 13px; font-weight: normal; margin: 5px; color: #4A4A4A;">
                    <a href="https://sketchfab.com/models/d8a122147c91476c8b2a16fd24e7a193?utm_medium=embed&utm_source=website&utm_campain=share-popup" target="_blank" style="font-weight: bold; color: #1CAAD9;">CoreXY Design</a>
                    by
                    <a href="https://sketchfab.com/sibu?utm_medium=embed&utm_source=website&utm_campain=share-popup" target="_blank" style="font-weight: bold; color: #1CAAD9;">sibu</a>
                    on
                    <a href="https://sketchfab.com?utm_medium=embed&utm_source=website&utm_campain=share-popup" target="_blank" style="font-weight: bold; color: #1CAAD9;">Sketchfab</a>
                </p>
            </div>
        </p>
        <h3>The X-carriage</h3>
        <p>
            <div class="sketchfab-embed-wrapper">
                <iframe width="640" height="480" src="https://sketchfab.com/models/cca1bc5221cd45ee9eaa00bc650b7a33/embed" frameborder="0" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true"
                    onmousewheel=""></iframe>

                <p style="font-size: 13px; font-weight: normal; margin: 5px; color: #4A4A4A;">
                    <a href="https://sketchfab.com/models/cca1bc5221cd45ee9eaa00bc650b7a33?utm_medium=embed&utm_source=website&utm_campain=share-popup" target="_blank" style="font-weight: bold; color: #1CAAD9;">X carriage for the CoreXY stage</a>
                    by
                    <a href="https://sketchfab.com/sibu?utm_medium=embed&utm_source=website&utm_campain=share-popup" target="_blank" style="font-weight: bold; color: #1CAAD9;">sibu</a>
                    on
                    <a href="https://sketchfab.com?utm_medium=embed&utm_source=website&utm_campain=share-popup" target="_blank" style="font-weight: bold; color: #1CAAD9;">Sketchfab</a>
                </p>
            </div>
        </p>
        <h3>The Y-carriage</h3>
        <p>
            <div class="sketchfab-embed-wrapper">
                <iframe width="640" height="480" src="https://sketchfab.com/models/0a546772535c48dcb2e6b67248b72b23/embed" frameborder="0" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true"
                    onmousewheel=""></iframe>

                <p style="font-size: 13px; font-weight: normal; margin: 5px; color: #4A4A4A;">
                    <a href="https://sketchfab.com/models/0a546772535c48dcb2e6b67248b72b23?utm_medium=embed&utm_source=website&utm_campain=share-popup" target="_blank" style="font-weight: bold; color: #1CAAD9;">Y-Carriage for the CoreXY stage</a>
                    by
                    <a href="https://sketchfab.com/sibu?utm_medium=embed&utm_source=website&utm_campain=share-popup" target="_blank" style="font-weight: bold; color: #1CAAD9;">sibu</a>
                    on
                    <a href="https://sketchfab.com?utm_medium=embed&utm_source=website&utm_campain=share-popup" target="_blank" style="font-weight: bold; color: #1CAAD9;">Sketchfab</a>
                </p>
            </div>
        </p>

        <p>
            I have shared all the required files with the 'uncut' rhino file to my
            <a href="https://drive.google.com/open?id=0Bzl4B7MOTBQZTXYyczdNZmtWZm8">google drive</a>. These includes the full Rhino file, the dxf for laser cutting, and stl's for the 3D printing.
        </p>
        <p>
            You can also download it
            <a href="XY-stage.3dm.tar.gz" download="XY-stage.3dm.tar.gz">here</a>.
        </p>
    </section>
    <section>
        <h2>Assembly of the CoreXY.</h2>
        <p>
            I can now laser cutr the oarts required for the coreXY. There are three parts to be 3D printed, a few parts like the bearing to be casted in babbitt metal.
        </p>
        <p>
            Unfortunately I don't have any pictures during the laser cutting and only a very few for the assembly. From my past experience I have learned that too tight of a press-fit is not the
            ideal choice for acrylic. The material is too brittle. The best option for acrylic is to have an exact fit, not too tight or loose, then use a solvent like acetone to bond
            the pieces together, this will bond them seamlessly. Next best choice is the cycno-crylic glues, super-glue.
        </p>
        <p>
            As I said there are a few 3D printed parts and a few cast parts, the procedure is the same as in
            <a href="../w12/w12.html">Moulding and Casting</a> assignment. In fact I will be making four of the plain bearing I made in that assignment, along with a few Babbitt metal idler gears. For which
            I made a new and improved mould, but they still didn't work as expected, they aren't smooth but each of them need a bit of sanding to get a smoother outer edge. Without
            this they are not performing well, I later used a
            <a href="http://www.thingiverse.com/thing:16627">thingiverse</a> OpenSCAD file to make a profile of a matching pullery and laser cut in acrylic.
        </p>
        <p>
            <img src="bab-pul1.jpg" width="600" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='900'" onclick="this.width='600'" />
            <figcaption style="display:block; color:grey">The idler pulleys are made by 'cloning' the 16-tooth-GT2 pulley meant for a 5 mm nema-17 stepper. SInce the rods I'll be mounting this pulleys are of 6 mm, I need something
                which has 5 mm at one end and 6 mm at the other, this is required only for making the silicone mould.
                <br> I made a reducer shaft (from 6 mm to 5 mm) using a wooden stick, the drill and a file, a makeshift lathe.</figcaption>

            <img src="bab-pul2.jpg" width="600" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='900'" onclick="this.width='600'" />
            <figcaption style="display:block; color:grey"> Here is the end result.</figcaption>

            <img src="bab-pul3.jpg" width="600" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='900'" onclick="this.width='600'" />
            <figcaption style="display:block; color:grey"> Cast Babbitt metal pulley using the new mould. </figcaption>

            <img src="bab-pul4.jpg" width="600" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='900'" onclick="this.width='600'" />
            <figcaption style="display:block; color:grey"> Making the inner surface smooth and lubricating the pulley.</figcaption>
        </p>
        <p>
            Here are a few pictures I took while assembling the CoreXY stage
            <br>
            <img src="assem-2.jpg" width="600" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='900'" onclick="this.width='600'" />
            <figcaption style="display:block; color:grey"> The frame is done, glued using cyno-acrylic glue, didn't use T-slots and nuts&bolts, thought about it initially, then left for the time being..</figcaption>

            <img src="assem-1.jpg" width="600" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='900'" onclick="this.width='600'" />
            <figcaption style="display:block; color:grey"> Testing the CoreXY movement with my stepper driver. This is when I decided to switch over to laser cut acrylic pulleys, the babitt metal had few rough edges in the 'channels'
                of the gear tooth. Probably caused by the bubble in the mould. This make the pulley not perfect circle and cause issue, the stages get stuck at times.</figcaption>
        </p>

        <h2>The Plotter</h2>
        <p>
            With the new pulley, I started testing it, with the help of
            <a href="http://reprap.org/wiki/RAMPS_1.4">RAMPS 1.4 board.</a> I first made a plotter. The RAMPS, was loaded with
            <a href="https://www.repetier.com/firmware/v092/">Repetier</a> firmware and used the repetier host to send the G-codes. I typed the first test pattern myself.
            <div class="codescroll">
                <pre>
G1 X000 Y000 F5000
G1 X200 Y000 F5000
G1 X200 Y200 F5000
G1 X000 Y200 F5000
G1 X000 Y000 F5000
G1 X200 Y200 F5000
G1 X000 Y200 F5000
G1 X200 Y000 F5000
G1 X000 Y000 F5000

G1 X000 Y000 F5000
G1 X200 Y000 F5000
G1 X200 Y010 F5000
G1 X000 Y010 F5000
G1 X000 Y020 F5000
G1 X200 Y020 F5000
G1 X200 Y030 F5000
G1 X000 Y030 F5000
G1 X000 Y040 F5000
G1 X200 Y040 F5000
G1 X200 Y050 F5000
G1 X000 Y050 F5000
G1 X000 Y060 F5000
G1 X200 Y060 F5000
G1 X200 Y070 F5000
G1 X000 Y070 F5000
G1 X000 Y080 F5000
G1 X200 Y080 F5000
G1 X200 Y090 F5000
G1 X000 Y090 F5000
G1 X000 Y100 F5000
G1 X200 Y100 F5000
G1 X200 Y110 F5000
G1 X000 Y110 F5000
G1 X000 Y120 F5000
G1 X200 Y120 F5000
G1 X200 Y130 F5000
G1 X000 Y130 F5000
G1 X000 Y140 F5000
G1 X200 Y140 F5000
G1 X200 Y150 F5000
G1 X000 Y150 F5000
G1 X000 Y160 F5000
G1 X200 Y160 F5000
G1 X200 Y170 F5000
G1 X000 Y170 F5000
G1 X000 Y180 F5000
G1 X200 Y180 F5000
G1 X200 Y190 F5000
G1 X000 Y190 F5000
G1 X000 Y200 F5000
G1 X200 Y200 F5000
G1 X000 Y000 F5000

G1 X000 Y000 F5000
G1 Y200 X000 F5000
G1 Y200 X010 F5000
G1 Y000 X010 F5000
G1 Y000 X020 F5000
G1 Y200 X020 F5000
G1 Y200 X030 F5000
G1 Y000 X030 F5000
G1 Y000 X040 F5000
G1 Y200 X040 F5000
G1 Y200 X050 F5000
G1 Y000 X050 F5000
G1 Y000 X060 F5000
G1 Y200 X060 F5000
G1 Y200 X070 F5000
G1 Y000 X070 F5000
G1 Y000 X080 F5000
G1 Y200 X080 F5000
G1 Y200 X090 F5000
G1 Y000 X090 F5000
G1 Y000 X100 F5000
G1 Y200 X100 F5000
G1 Y200 X110 F5000
G1 Y000 X110 F5000
G1 Y000 X120 F5000
G1 Y200 X120 F5000
G1 Y200 X130 F5000
G1 Y000 X130 F5000
G1 Y000 X140 F5000
G1 Y200 X140 F5000
G1 Y200 X150 F5000
G1 Y000 X150 F5000
G1 Y000 X160 F5000
G1 Y200 X160 F5000
G1 Y200 X170 F5000
G1 Y000 X170 F5000
G1 Y000 X180 F5000
G1 Y200 X180 F5000
G1 Y200 X190 F5000
G1 Y000 X190 F5000
G1 Y000 X200 F5000
G1 Y200 X200 F5000
G1 X000 Y000 F5000

G1 X000 Y000 F5000
G1 X000 Y100 F5000
G02 X000 Y100 I100 J0 F4000

G1 X010 Y100 F5000
G02 X010 Y100 I090 J0 F4000

G1 X020 Y100 F5000
G02 X020 Y100 I080 J0 F4000

G1 X030 Y100 F5000
G02 X030 Y100 I070 J0 F4000

G1 X040 Y100 F5000
G02 X040 Y100 I060 J0 F4000

G1 X050 Y100 F5000
G02 X050 Y100 I050 J0 F4000

G1 X060 Y100 F5000
G02 X060 Y100 I040 J0 F4000

G1 X070 Y100 F5000
G02 X070 Y100 I030 J0 F4000

G1 X080 Y100 F5000
G02 X080 Y100 I020 J0 F4000

G1 X090 Y100 F5000
G02 X090 Y100 I010 J0 F4000

G1 Y100 X100 F5000
G1 Y000 X000 F5000
              </pre>
            </div>
            <br> Which will give the following output as seen in the following youtube video.
            <br>

            <iframe width="420" height="315" src="https://www.youtube.com/embed/h8A0koVK7f4" frameborder="0" allowfullscreen></iframe>
            <br>
            <img width="800" src="pattern.jpg" />
            <br>Notice that the plots are not in proper scale, I did this for demo purpose, for better visibility.
            <br> If you watch carefully you can see some places where the sharp right angled coroners looks like 'fillets'. This is not an error of the machine, rather because of the flexibility
            of the pen-refill I'm using. But this could happen with my final product too, not much as there won't be any pressure on the tool wire, it just floats in the dielectric,
            just above the copper.
        </p>

        <p>
            Now that I have a pen plotter, let's just do some complicated plots. With the help of
            <a href="http://www.makercam.com/">http://www.makercam.com/</a> I created a Gcode file which is a 'profiling toolpath' for one of my PCB design. I plotted this too, just because I can, and it looks nice.
            <br>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/Sj74Xac59QE" frameborder="0" allowfullscreen></iframe>
        </p>
    </section>

    <section>
        <h2>Let's Spark It</h2>
        <p>
            For the first trial, I re-purposed my stepper-servo-control
            <a href="../w11/w11.html"></a>, I programmed it with a simple logic. There is a voltage divider network which reduces the voltage difference between the tool wire and the ground to logic levels.
            The output of this divider will be higher than zero(value depends in on the gap between the wire and the PCB, more the gap, more the voltage, up to a maximum of the supply
            voltage). This voltage is fed to the ADC of the stepper-servo-controller. When the ADC goes low, the stepper should back off as the tool wire is too close to the PCB, perhaps
            touching it. If the ADC goes too high, it means that the wire is too far away from the PCB.
        </p>
        I then made a shallow water container using acrylic and hot-glue to seal it. Water is used as the dielectric here. The dielectric is important, without it the spark channels won't be
        narrow. The dielectric fluid has a high dielectric constant compared to air. Higher the dielectric constant, higher the voltage required to cause a breakdown at a given distance,
        in simple English it means higher voltages are required to initiate spark at a given distance.
        <br>
        <br>
        <b>This results in a spark that is constarined to a small area, how?</b>
        <br>The sparks follow a lowest resistant path, electrically closest, usually the physically closest points. Now since the dielectric constant is high the potential required to cause
        arcing at a slightly longer path than the shortest, is magnified by the dielectric constant. Which means the probability for the arcing to happen between the physically closest
        points are magnified.
        <br>The liquid also acts as coolant and a as a cleaning agent.
        <p>
            This idea was supposed to work fine, but it didn't, not a complete fail, but I'm not happy with the results. The wire touches the the copper every now and then, the extrude wheel diameter
            should have been smaller. Even with the 16 step, micro-stepping, each step pushes too much wire.
        </p>
        <p>
            This is when I decided to add a trigger mechanism. The 30V supply from the lab power supply, along with a 2000uF capacitor bank has enough energy to do some erosion on the surface.
            But the 30v is not sufficient to cause a breakdown of the dielectric at some practical distance.
        </p>
        <p>
            The trigger is actually a short pulse of an higher voltage, say 100v. This will initiate the arc and the ionized path will create a conductive path for the low voltage high energy pulse.
            The high voltage pulse was originally was created using a rectifier and a filter on an 110 VAC, which will produce about 150v DC. Dealing with mains is dangerous and hence
            I decided to make a
            <a href="https://en.wikipedia.org/wiki/Cockcroft%E2%80%93Walton_generator">Cockcroft Walton Generator</a>.
        </p>
        <p>
            But for the demo purpose I used the rectified mains only. The pulse was supposed to be controlled by the micro controller (inside the stepper-servo controller) via a MOSFET. But it
            wasn't necessary as the voltage multiplier itself was oscillating and was producing the pulses, thjis was due to the fact that each pulse discharges the capacitors in the
            generator completely, depleting the voltage way too low to support the arc. Then the next spark will only initiate after the capacitors are charged enough. More the distance
            between the PCB and the tool wire, less frequent the pulses were.
            <br>
            <br>Here is a a video of an extremly high voltage genrator using many stages of the Cockcroft Walton Generator, this is not mine, just sharing an youtube video. The video shows
            the relation between the freqency of the sparks and the distance.
            <br>
            <iframe width="420" height="315" src="https://www.youtube.com/embed/lDQLHAFTaXM" frameborder="0" allowfullscreen></iframe>
            <br>
        </p>
        <p>
            I'll have to make one of these with two or three stages. Thinking about using a 555-timer, or the micro-controller itself to controls power transistor to make the square wave required
            for the generator. Actually it's easy to do it with just the micro-controller itself, will be using only one digital I/O pin, and one of the timers in it.
        </p>
    </section>

    <p>
        With all of this setup, I could get some results, the ramps will send a command to the stepper servo controller board to indicate if the head is moving for a cut.
    </p>
    <p>
        Here is my final project presentation video which also shows the result.
        <br>
        <video width="720" controls>
            <source src="../presentation.mp4" type="video/mp4"> Your browser does not support the video tag.
        </video>
        <br>
    </p>
    <p>
        <b>Here are the pictures of a few boards I made for the first trial, this is all crap now. Lot of rewiring, and tweaking have been done on the other side of the boards. Appropriately
            modified schematics have been given further don the page.</b>
        <br>
        <img src="crap.jpg" width="600" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='1000'" onclick="this.width='600'" />
        <figcaption style="display:block; color:grey">From left
            <br>The 'hot-side' control circuit, this is the trigger pulse generating circuit, with it's rectifier, filter capacitor, trigger pulse current limiting resistor and the MOSFET
            to control the trigger pulse.
            <br> The 'cold side', this board controls the main pulse, has the protection diodes (which keeps the high voltage pulse away from the low voltage side), current limiting resistors
            and the MOSFETs.
            <br> ANd the last, the capacitor bank, about 4000uF.
        </figcaption>

    </p>
    <section>
        <h2>Further development</h2>
        <p>
            So far I don't have a polished product. But I'm in the process of making one, based on the data so far. I choose a dual micro-controller solution, could be done with a single micro-controller,
            but for testing the XY stage and Tool head separately, individual micro-controllers would be beneficial. Also, during my presentation, Neil suggested that the this could
            be devolved into a general purpose EDM machine, separating the tool-head from the XY-stage is beneficial for that too.
        </p>
        <h3>The Block Diagram of The Electronics of the Machine</h3>
        <p>
            <figure>
                <img src="sparky-block.svg" width="600" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='1500'" onclick="this.width='600'"
                />
                <figcaption style="display:block; color:grey"></figcaption>

                <img src="fet-driver.png" width="600" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='1500'" onclick="this.width='600'" />
                <figcaption style="display:block; color:grey">Here is the schematic of the MOSFET driver with an isolated power-supply (9v battery in this case). The outputs of this circuit goes to the Gate nad Source of the two
                    MOSFETs being driven. This section uses <code>PC817</code> optocouplers and two NPN and two PNP transistors along with a bunch of biasing resistors.</figcaption>

                <img src="32u4.png" width="600" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='1500'" onclick="this.width='600'" />
                <figcaption style="display:block; color:grey">The schematic for Atmega32u4 Board. This is board is made standalone, so that I can re-purpose this later, if I need.</figcaption>

                <img src="xy-step.png" width="600" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='1500'" onclick="this.width='600'" />
                <figcaption style="display:block; color:grey">The module with the drivers for X & Y stepper motors.</figcaption>

                <img src="tool-control.png" width="600" style="cursor:zoom-in" title="double click => zoom-in; single click => normal size" ondblclick="this.width='1500'" onclick="this.width='600'"
                />
                <figcaption style="display:block; color:grey">The control board for the tool-head/wire feeder.</figcaption>
            </figure>
            The MOSFET'S will be mounted separately on a heat-sink. For the rest I need to make board from these schematic, mill it, stuff it, test and reiterate if necessary.
        </p>
        <h3>
            <a href="sparky.tar.gz" download="sparky-schem.tar.gz">click to download all the schematic files</a>
        </h3>
        <p>

        </p>
    </section>


    <section id="w19">
        <h1>Project Devolopment Questions.</h1>
        <b style="color:red"> Note that this section is being updated every now and then. Which means the answeres of time related questions are updated with the status of the date of last update.
            <br>
            <br>The last update was on 8th, July, 2016, 23:45 IST.</b>
        <br>
        <h2>what tasks have been completed, and what tasks remain? </h2>
        <p>
            <ul>
                <li>The mechanical stages has been done.</li>
                <li>The wire extruder is done and working.</li>
                <li>The 'alpha' stage programs for controlling the tool wire feeder is working.</li>
                <li>The technique of using a high voltage trigger pulse is working.</li>
                <li>The babbitt metal cast linear bearing is doing a fantastic job.</li>
            </ul>
            <br>
            <br>
            <ul>
                <li>Has to document everything in detail. Unlike my documentation for all other assignments, this page is of poor quality and lacks many of the key components. Partially
                    because I have been doing this project under a tight schedule, didn't have the luxury of time that I used to have during the other assignments, each of which had
                    one week. Now this is equivalent to many of this assignments packed into a tight schedule. There were other tasks too, like finishing a few pending assignments,
                    fixing mistakes.</li>
                <li>The electronics need a lot of refinement, I did it in a hurry, and I'm new to the electronics design area. I came to notice that MOSFETs are driven by V
                    <sub>GS</sub> and is not easy to be used as a high-side solid state switch.
                    <br>So I had to design an entire new and complicated board with opto-couplers and isolated power supply(9v batteries).</li>
                <li>The wire feeder need a better resolution, could be done with gears or smaller rubber wheel, also considering a better contact mechanism.</li>
                <li>The coding, the tool path creator is remaining </li>
                <li>I need to have a polished firmware and circuit.</li>
                <li>Has to finalize the variables like, capacitor values, supply power rating etc and decide on the components accordingly, then I have to make the final circuit, one with
                    no RAMPS and Arduino, a standalone controller for the entire machine. This has to be modular as well.
                    <br>This task requires a lot of time, and materials and guidance form other people. Lot of reading to be done. I'm in touch with many people in the EDM enthusiast communities.
                </li>
                <li>I'm yet to think about and implement a height map (scanning the surface imperfections of the PCB) generator for precise positioning.</li>
            </ul>
        </p>

        <h2>what has worked? what hasn't?</h2>
        <p>
            <ul>
                <li>The idea seems to be working. The technique is able to mill the PCB. But it's no where near perfection.</li>
                <li>The CoreXY stage.</li>
                <li>The rudimentary circuits to test the idea.</li>
            </ul>
            <br>
            <br>
            <ul>
                <li>The Babbitt metal cast pulley failed.</li>
                <li>The initial circuit with no isolated MOSFET drivers failed, had a blown MOSFET.</li>
            </ul>
        </p>

        <h2>what questions need to be resolved?</h2>
        <p>
            <ul>
                Lot of questions are there, in fact I ended up with more question thaan when I begin the project. The main quetsions are.
                <ul>
                    <li>What is the best voltage range.</li>
                    <li>What's the best capacitor value, or pulse energy.</li>
                    <li>What's the best di-electric to be used, many people suggested me transformer fluid or mineral oil as a cheap alternative, but may also need filtration units, oil
                        pump etc.</li>
                    <li>How to sense/mesure the gap accurately.</li>
                </ul>
            </ul>
        </p>

        <h2>what will happen when?</h2>
        <p>
            As of 8th July, end of Fab Academy, you have seen what I have done, more things will happen in future. First of all I need to take my time to develop a decent board, do not want to
            hurry and blow up components.
        </p>

        <h2>what have you learned?</h2>
        <p>
            I have learned a lot, for example I have used the following techniques for my project.
            <ul>
                <li>Machine design</li>
                <li>Moulding and casting</li>
                <li>3D/2D designing</li>
                <li>3D printing</li>
                <li>Electronics production, design and embedded programming</li>
            </ul>
        </p>

        <p>
            I have also learned a few important things, about time management, I realized that I shouldn't have chosen such a complicated project if I had only just a over a month of time. I complete
            underestimated the complexity.
        </p>

    </section>

    <section>
        <img width="800" src="../presentation.png" />
        <br>
        <br>
        <br>
        <video width="720" controls>
            <source src="../presentation.mp4" type="video/mp4"> Your browser does not support the video tag.
        </video>
    </section>

    <section>
        <h2>Resources</h2>
        <ul>
            <li>
                <a href="http://www.homebuiltedmmachines.com/">http://www.homebuiltedmmachines.com/</a>
            </li>
            <li>
                <a href="http://reprap.org/wiki/Electrical_Discharge_Machining">http://reprap.org/wiki/Electrical_Discharge_Machining</a>
            </li>
            <li>
                <a href="http://www.liming.org/edm/index.html">http://www.liming.org/edm/index.html</a>
            </li>
            <li>
                <a href="http://modelenginenews.org/meng/edm/index.html">http://modelenginenews.org/meng/edm/index.html</a>
            </li>
            <li>
                <a href="https://groups.yahoo.com/neo/groups/EDMHomeBuilders/info">https://groups.yahoo.com/neo/groups/EDMHomeBuilders/info</a>
            </li>
            <li>
                <a href="http://pico-systems.com/edm.html">http://pico-systems.com/edm.html</a>
            </li>
            <li>
                <a href="http://edmtechman.com/about.cfm?pg=2&chap=3">http://edmtechman.com/about.cfm?pg=2&chap=3</a>
            </li>
            <li>
                <a href="http://shodhganga.inflibnet.ac.in/bitstream/10603/4655/11/11_chapter%202.pdf">http://shodhganga.inflibnet.ac.in/bitstream/10603/4655/11/11_chapter%202.pdf</a>
            </li>
            <li>
                <a href="http://tahmidmc.blogspot.in/2013/02/n-channel-mosfet-high-side-drive-when.html">http://tahmidmc.blogspot.in/2013/02/n-channel-mosfet-high-side-drive-when.html</a>
            </li>
        </ul>
    </section>
</body>

</html>
